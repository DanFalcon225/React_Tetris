{"ast":null,"code":"import _slicedToArray from \"/Users/daniilssokolovs/react-smash/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/daniilssokolovs/react-smash/src/components/Tetris.js\";\n\nimport React, { useState } from 'react';\nimport { createStage, checkCollision } from '../gameHelpers'; // Styled Components\n\nimport { StyledTetrisWrapper, StyledTetris } from './styles/StyledTetris'; // Custom Hooks\n\nimport { usePlayer } from '../hooks/usePlayer';\nimport { useStage } from '../hooks/useStage'; // Components\n\nimport Stage from './Stage';\nimport Display from './Display';\nimport StartButton from './StartButton';\n\nvar Tetris = function Tetris() {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      dropTime = _useState2[0],\n      setDropTime = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      gameOver = _useState4[0],\n      setGameOver = _useState4[1];\n\n  var _usePlayer = usePlayer(),\n      _usePlayer2 = _slicedToArray(_usePlayer, 3),\n      player = _usePlayer2[0],\n      updatePlayerPos = _usePlayer2[1],\n      resetPlayer = _usePlayer2[2];\n\n  var _useStage = useStage(player, resetPlayer),\n      _useStage2 = _slicedToArray(_useStage, 2),\n      stage = _useStage2[0],\n      setStage = _useStage2[1];\n\n  console.log('re-render');\n\n  var movePlayer = function movePlayer(dir) {\n    if (!checkCollision(player, stage, {\n      x: dir,\n      y: 0\n    })) {\n      updatePlayerPos({\n        x: dir,\n        y: 0\n      });\n    }\n  };\n\n  var startGame = function startGame() {\n    console.log(\"test\"); // Reset everything\n\n    setStage(createStage());\n    resetPlayer();\n    setGameOver(false);\n  };\n\n  var drop = function drop() {\n    if (!checkCollision(player, stage, {\n      x: 0,\n      y: 1\n    })) {\n      updatePlayerPos({\n        x: 0,\n        y: 1,\n        collided: false\n      });\n    } else {\n      // Game Over\n      if (player.pos.y < 1) {\n        console.log(\"GAME OVER!!!\");\n        setGameOver(true);\n        setDropTime(null);\n      }\n\n      updatePlayerPos({\n        x: 0,\n        y: 0,\n        collided: true\n      });\n    }\n  };\n\n  var dropPlayer = function dropPlayer() {\n    drop();\n  };\n\n  var move = function move(_ref) {\n    var keyCode = _ref.keyCode;\n\n    if (!gameOver) {\n      if (keyCode === 37) {\n        movePlayer(-1);\n      } else if (keyCode === 39) {\n        movePlayer(1);\n      } else if (keyCode === 40) {\n        dropPlayer();\n      }\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(StyledTetrisWrapper, {\n    role: \"button\",\n    tabIndex: \"0\",\n    onKeyDown: function onKeyDown(e) {\n      return move(e);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(StyledTetris, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Stage, {\n    stage: stage,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"aside\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, gameOver ? /*#__PURE__*/React.createElement(Display, {\n    gameOver: gameOver,\n    text: \"Game Over\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Display, {\n    text: \"Score\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Display, {\n    text: \"Rows\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Display, {\n    text: \"Level\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(StartButton, {\n    callback: startGame,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }))));\n};\n\nexport default Tetris;","map":{"version":3,"names":["React","useState","createStage","checkCollision","StyledTetrisWrapper","StyledTetris","usePlayer","useStage","Stage","Display","StartButton","Tetris","dropTime","setDropTime","gameOver","setGameOver","player","updatePlayerPos","resetPlayer","stage","setStage","console","log","movePlayer","dir","x","y","startGame","drop","collided","pos","dropPlayer","move","keyCode","e"],"sources":["/Users/daniilssokolovs/react-smash/src/components/Tetris.js"],"sourcesContent":["import React, { useState } from 'react';\n\nimport { createStage, checkCollision } from '../gameHelpers';\n\n// Styled Components\nimport { StyledTetrisWrapper, StyledTetris } from './styles/StyledTetris';\n\n// Custom Hooks\nimport { usePlayer } from '../hooks/usePlayer';\nimport { useStage } from '../hooks/useStage';\n\n// Components\nimport Stage from './Stage';\nimport Display from './Display';\nimport StartButton from './StartButton';\n\nconst Tetris = () => {\n  const [dropTime, setDropTime] = useState(null);\n  const [gameOver, setGameOver] = useState(false);\n\n  const [player, updatePlayerPos, resetPlayer] = usePlayer();\n  const [stage, setStage] = useStage(player, resetPlayer);\n\n  console.log('re-render');\n\n  const movePlayer = dir => {\n    if (!checkCollision(player, stage, { x: dir, y: 0 })) {\n      updatePlayerPos({ x: dir, y: 0 });\n    }\n  }\n\n  const startGame = () => {\n    console.log(\"test\")\n    // Reset everything\n    setStage(createStage());\n    resetPlayer();\n    setGameOver(false);\n  }\n\n  const drop = () => {\n    if (!checkCollision(player, stage, { x: 0, y: 1 })) {\n      updatePlayerPos({ x: 0, y: 1, collided: false })\n    } else {\n      // Game Over\n      if (player.pos.y < 1) {\n        console.log(\"GAME OVER!!!\");\n        setGameOver(true);\n        setDropTime(null);\n      }\n      updatePlayerPos({ x: 0, y: 0, collided: true });\n    }\n  }\n\n  const dropPlayer = () => {\n    drop();\n  }\n\n  const move = ({ keyCode }) => {\n    if (!gameOver) {\n      if (keyCode === 37) {\n        movePlayer(-1);\n      } else if (keyCode === 39) {\n        movePlayer(1);\n      } else if (keyCode === 40) {\n        dropPlayer();\n      }\n    }\n  }\n\n  return (\n    <StyledTetrisWrapper role=\"button\" tabIndex=\"0\" onKeyDown={e => move(e)}>\n      <StyledTetris>\n        <Stage stage={stage} />\n        <aside>\n          {gameOver ? (\n            <Display gameOver={gameOver} text=\"Game Over\" />\n          ) : (\n            <div>\n              <Display text=\"Score\" />\n              <Display text=\"Rows\" />\n              <Display text=\"Level\" />\n            </div>\n          )}\n          <StartButton callback={startGame} />\n        </aside>\n      </StyledTetris>\n    </StyledTetrisWrapper>\n  );\n};\n\nexport default Tetris;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}